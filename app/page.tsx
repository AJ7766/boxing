import { BgText } from "@/components/News/BgText";
import { Event } from "@/components/News/Event";
import { Fight } from "@/components/News/FIght";
import { Location } from "@/components/News/Location";
import { EventDate } from "@/components/News/EventDate";
import { prisma } from "@/lib/prisma";
import { Video } from "@/components/News/Video";

const Videos = [{
  id: "_NCcP6V67MA",
  alt: "GLOVES OFF: Tank vs Roach | EPISODE 1",
  type: "GLOVES OFF"
}]

export default async function News() {
  const id = '675f98329777a49a554299e9';
  const fetchedFight = await prisma.fight.findUnique({
    where: { id },
    select: {
      title: true,
      location: true,
      date: true,
      fighter1: { select: { name: true, nickname: true } },
      fighter2: { select: { name: true, nickname: true } },
    },
  });

  if (!fetchedFight)
    console.error('No fight found');

  return (
    <main className={`relative bg-gray-100 px-7 py-16 overflow-hidden`}>
      <BgText
        fighter1={fetchedFight?.fighter1?.name || fetchedFight?.fighter1?.nickname}
        fighter2={fetchedFight?.fighter2?.name || fetchedFight?.fighter2?.nickname}
      />
      <Event
        fighter1={fetchedFight?.fighter1}
        fighter2={fetchedFight?.fighter2}
      >
        <Fight
          fighter1={fetchedFight?.fighter1?.name || fetchedFight?.fighter1?.nickname}
          fighter2={fetchedFight?.fighter2?.name || fetchedFight?.fighter2?.nickname}
        />
        <Location
          location={fetchedFight?.location}
        />
        <EventDate date={fetchedFight?.date?.toISOString()} />

        {/* Videos */}
        <div className="flex flex-row gap-1">
          {Videos.map((video) => (
            <Video
              key={video.id}
              id={video.id}
              alt={video.alt}
              type={video.type}
            />
          ))
          }
        </div>
      </Event>
    </main >
  )
}

export const metadata = {
  title: "News - Boxing",
  description: "Generated by create next app",
};